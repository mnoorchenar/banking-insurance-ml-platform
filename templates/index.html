<!doctype html>
<html lang="en" data-bs-theme="dark">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Banking & Insurance ML Platform</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css"/>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/plotly.js/2.27.0/plotly.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/js/bootstrap.bundle.min.js"></script>
<link rel="stylesheet" href="/static/style.css"/>
</head>
<body>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê SIDEBAR ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="sidebar">
  <div class="sidebar-brand">
    <h5><i class="bi bi-bank2"></i> ML Platform</h5>
    <small>Banking & Insurance Analytics</small>
  </div>
  <nav class="mt-2 flex-grow-1">
    <a class="nav-link active" onclick="show('overview')" href="#">
      <i class="bi bi-grid-1x2-fill"></i> Overview
    </a>
    <a class="nav-link" onclick="show('credit')" href="#">
      <i class="bi bi-credit-card-fill"></i> Credit Risk
    </a>
    <a class="nav-link" onclick="show('insurance')" href="#">
      <i class="bi bi-shield-check"></i> Insurance Pricing
    </a>
    <a class="nav-link" onclick="show('churn')" href="#">
      <i class="bi bi-person-x-fill"></i> Churn Prediction
    </a>
    <a class="nav-link" onclick="show('fraud')" href="#">
      <i class="bi bi-exclamation-triangle-fill"></i> Fraud Detection
    </a>
    <a class="nav-link" onclick="show('compare')" href="#">
      <i class="bi bi-bar-chart-line-fill"></i> Model Comparison
    </a>
    <a class="nav-link" onclick="show('data')" href="#">
      <i class="bi bi-table"></i> Data Explorer
    </a>
  </nav>
  <div class="p-3 border-top" style="border-color:#334155!important;font-size:.72rem;color:#475569;">
    <i class="bi bi-cpu-fill text-primary me-1"></i>
    Synthetic data ¬∑ Educational use only
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê MAIN ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="main">

  <!-- ‚îÄ‚îÄ OVERVIEW ‚îÄ‚îÄ -->
  <div class="page active" id="page-overview">
    <h4 class="fw-bold mb-0"><i class="bi bi-grid-1x2-fill me-2 text-primary"></i>Executive Overview</h4>
    <p class="text-secondary mb-3" style="font-size:.85rem;">Platform snapshot ¬∑ All models trained on synthetic data</p>

    <div class="row g-3 mb-3">
      <div class="col-6 col-lg-3">
        <div class="kpi-card text-center">
          <div class="kpi-val">{{ cr_auc }}</div>
          <div class="kpi-label">Credit Risk AUC</div>
          <div class="mt-1"><span class="badge bg-primary bg-opacity-25 text-primary">Best: GBM</span></div>
        </div>
      </div>
      <div class="col-6 col-lg-3">
        <div class="kpi-card text-center">
          <div class="kpi-val" style="color:var(--success)">{{ chn_auc }}</div>
          <div class="kpi-label">Churn AUC</div>
          <div class="mt-1"><span class="badge bg-success bg-opacity-25 text-success">Best: GBM</span></div>
        </div>
      </div>
      <div class="col-6 col-lg-3">
        <div class="kpi-card text-center">
          <div class="kpi-val" style="color:var(--warn)">{{ frd_auc }}</div>
          <div class="kpi-label">Fraud AUC</div>
          <div class="mt-1"><span class="badge bg-warning bg-opacity-25 text-warning">Best: GBM</span></div>
        </div>
      </div>
      <div class="col-6 col-lg-3">
        <div class="kpi-card text-center">
          <div class="kpi-val" style="color:var(--danger)">{{ ins_r2 }}</div>
          <div class="kpi-label">Insurance R¬≤</div>
          <div class="mt-1"><span class="badge bg-danger bg-opacity-25 text-danger">Best: GBM</span></div>
        </div>
      </div>
    </div>

    <div class="row g-3">
      <div class="col-md-6">
        <div class="section-card">
          <div class="section-title">Model Family Comparison</div>
          <div class="section-sub">AUC across classification tasks</div>
          <div id="ov-radar" style="height:320px;"></div>
        </div>
      </div>
      <div class="col-md-6">
        <div class="section-card">
          <div class="section-title">Data at a Glance</div>
          <div class="section-sub">Synthetic training dataset sizes</div>
          <div id="ov-bar" style="height:320px;"></div>
        </div>
      </div>
    </div>

    <div class="row g-3 mt-0">
      <div class="col-12">
        <div class="section-card">
          <div class="section-title">Model Families Explained
            <span class="ms-2 badge bg-primary bg-opacity-25 text-primary" style="font-size:.7rem;">Stakeholder Guide</span>
          </div>
          <div class="row g-2 mt-1">
            <div class="col-md-4">
              <div class="stakeholder-box">
                <div class="label">üå≥ Decision Tree</div>
                <p class="mb-0 mt-1" style="font-size:.82rem;">A simple flowchart of "if-then" rules. Easy to explain to regulators ‚Äî you can literally print the rules. Lower accuracy but maximum transparency.</p>
              </div>
            </div>
            <div class="col-md-4">
              <div class="stakeholder-box">
                <div class="label">üå≤ Bagging (Random Forest)</div>
                <p class="mb-0 mt-1" style="font-size:.82rem;">Hundreds of diverse decision trees vote together. Like getting opinions from many independent analysts. High accuracy, moderate explainability.</p>
              </div>
            </div>
            <div class="col-md-4">
              <div class="stakeholder-box">
                <div class="label">üöÄ Boosting (GBM / AdaBoost)</div>
                <p class="mb-0 mt-1" style="font-size:.82rem;">Trees built sequentially, each fixing the mistakes of the last. Usually the most accurate approach ‚Äî the engine behind many winning credit models.</p>
              </div>
            </div>
            <div class="col-md-4">
              <div class="stakeholder-box">
                <div class="label">üìä GLM (Logistic / Gamma / Tweedie)</div>
                <p class="mb-0 mt-1" style="font-size:.82rem;">The insurance industry's long-trusted statistical model. Produces exact coefficients ‚Äî loved by actuaries and regulators for auditability.</p>
              </div>
            </div>
            <div class="col-md-4">
              <div class="stakeholder-box">
                <div class="label">üïµÔ∏è Isolation Forest</div>
                <p class="mb-0 mt-1" style="font-size:.82rem;">Detects fraud by isolating unusual transactions. Doesn't need labelled fraud examples to train. Ideal for "unknown unknowns" in financial crime.</p>
              </div>
            </div>
            <div class="col-md-4">
              <div class="stakeholder-box">
                <div class="label">üéØ Accuracy vs. Explainability</div>
                <p class="mb-0 mt-1" style="font-size:.82rem;">In regulated industries, a less-accurate explainable model often wins over a black-box. This platform shows both ends of the spectrum.</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ‚îÄ‚îÄ CREDIT RISK ‚îÄ‚îÄ -->
  <div class="page" id="page-credit">
    <h4 class="fw-bold mb-0"><i class="bi bi-credit-card-fill me-2" style="color:#60a5fa"></i>Credit Risk Scoring</h4>
    <p class="text-secondary mb-3" style="font-size:.85rem;">Predict probability of loan default ¬∑ Binary classification</p>
    <div class="stakeholder-box mb-3">
      <div class="label">üìã Business Context</div>
      <p class="mb-0 mt-1" style="font-size:.83rem;">Every loan application is scored to estimate default probability. A higher score = higher risk. The bank sets a cut-off (e.g. reject above 0.30) to balance profitability and regulatory capital. The GLM model provides auditable coefficients for credit policy committees; GBM maximises predictive power for automated decisions.</p>
    </div>
    <div class="row g-3 mb-3" id="cr-kpis"></div>
    <div class="row g-3">
      <div class="col-lg-7">
        <div class="section-card">
          <div class="section-title">ROC Curves ‚Äî All Models</div>
          <div class="section-sub">Higher and further left = better discrimination</div>
          <div id="cr-roc" style="height:350px;"></div>
        </div>
      </div>
      <div class="col-lg-5">
        <div class="section-card">
          <div class="section-title">Feature Importance (GBM)</div>
          <div id="cr-imp" style="height:350px;"></div>
        </div>
      </div>
    </div>
    <div class="row g-3">
      <div class="col-lg-5">
        <div class="section-card">
          <div class="section-title">Confusion Matrix ‚Äî GBM</div>
          <div id="cr-cm" style="height:280px;"></div>
        </div>
      </div>
      <div class="col-lg-7">
        <div class="section-card">
          <div class="section-title">GLM Coefficients <span class="ms-2 model-badge badge-glm">statsmodels</span></div>
          <div class="section-sub">Positive = increases default probability</div>
          <div id="cr-coef" style="height:280px;"></div>
        </div>
      </div>
    </div>
    <div class="row g-3">
      <div class="col-12">
        <div class="section-card">
          <div class="section-title">Decision Tree Rules <span class="ms-2 model-badge badge-dt">max_depth = 3</span></div>
          <div class="technical-box">
            <div class="label">üî¨ Technical Detail</div>
            <p style="font-size:.8rem;color:#86efac;margin:.5rem 0 0;">These if-then rules can be turned directly into a scoreboard or credit policy. Every split threshold is auditable.</p>
          </div>
          <pre class="tree-pre" id="cr-rules"></pre>
        </div>
      </div>
    </div>
  </div>

  <!-- ‚îÄ‚îÄ INSURANCE ‚îÄ‚îÄ -->
  <div class="page" id="page-insurance">
    <h4 class="fw-bold mb-0"><i class="bi bi-shield-check me-2" style="color:#f59e0b"></i>Insurance Premium Pricing</h4>
    <p class="text-secondary mb-3" style="font-size:.85rem;">Predict premium ¬∑ Regression ¬∑ GLM Tweedie / Gamma</p>
    <div class="stakeholder-box mb-3">
      <div class="label">üìã Business Context</div>
      <p class="mb-0 mt-1" style="font-size:.83rem;">Actuaries use GLMs to price insurance policies ‚Äî the Tweedie family handles the awkward mix of zero claims and positive claim amounts. ML models (GBM) can improve on GLMs but require more governance. This module compares both approaches side-by-side.</p>
    </div>
    <div class="row g-3 mb-3" id="ins-kpis"></div>
    <div class="row g-3">
      <div class="col-lg-6">
        <div class="section-card">
          <div class="section-title">Predicted vs Actual Premium</div>
          <select class="form-select form-select-sm mb-2" id="ins-model-sel" style="background:#0f172a;border-color:#334155;color:#e2e8f0;width:auto;"></select>
          <div id="ins-scatter" style="height:320px;"></div>
        </div>
      </div>
      <div class="col-lg-6">
        <div class="section-card">
          <div class="section-title">Feature Importance (GBM)</div>
          <div id="ins-imp" style="height:370px;"></div>
        </div>
      </div>
    </div>
    <div class="row g-3">
      <div class="col-12">
        <div class="section-card">
          <div class="section-title">Model Comparison ‚Äî Regression Metrics</div>
          <div id="ins-compare" style="height:280px;"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- ‚îÄ‚îÄ CHURN ‚îÄ‚îÄ -->
  <div class="page" id="page-churn">
    <h4 class="fw-bold mb-0"><i class="bi bi-person-x-fill me-2" style="color:#a78bfa"></i>Customer Churn Prediction</h4>
    <p class="text-secondary mb-3" style="font-size:.85rem;">Predict which customers will leave ¬∑ Binary classification</p>
    <div class="stakeholder-box mb-3">
      <div class="label">üìã Business Context</div>
      <p class="mb-0 mt-1" style="font-size:.83rem;">Retaining a banking customer costs 5√ó less than acquiring a new one. This model scores each customer monthly; the top 10% highest-risk customers are flagged for a retention campaign (fee waiver, personalised offer, relationship call).</p>
    </div>
    <div class="row g-3 mb-3" id="chn-kpis"></div>
    <div class="row g-3">
      <div class="col-lg-7">
        <div class="section-card">
          <div class="section-title">ROC Curves ‚Äî All Models</div>
          <div id="chn-roc" style="height:350px;"></div>
        </div>
      </div>
      <div class="col-lg-5">
        <div class="section-card">
          <div class="section-title">Feature Importance (GBM)</div>
          <div id="chn-imp" style="height:350px;"></div>
        </div>
      </div>
    </div>
    <div class="row g-3">
      <div class="col-md-6">
        <div class="section-card">
          <div class="section-title">Churn Rate by Satisfaction Score</div>
          <div id="chn-sat" style="height:280px;"></div>
        </div>
      </div>
      <div class="col-md-6">
        <div class="section-card">
          <div class="section-title">Churn Rate by Tenure Band</div>
          <div id="chn-tenure" style="height:280px;"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- ‚îÄ‚îÄ FRAUD ‚îÄ‚îÄ -->
  <div class="page" id="page-fraud">
    <h4 class="fw-bold mb-0"><i class="bi bi-exclamation-triangle-fill me-2 text-warning"></i>Fraud Detection</h4>
    <p class="text-secondary mb-3" style="font-size:.85rem;">Identify anomalous transactions ¬∑ Isolation Forest + DT + GBM</p>
    <div class="stakeholder-box mb-3">
      <div class="label">üìã Business Context</div>
      <p class="mb-0 mt-1" style="font-size:.83rem;">Only ~5% of transactions are fraudulent ‚Äî a heavily imbalanced problem. Isolation Forest catches novel fraud patterns without needing labelled examples; GBM achieves higher AUC when historical labels are available.</p>
    </div>
    <div class="row g-3 mb-3">
      <div class="col-6 col-lg-3">
        <div class="kpi-card text-center">
          <div class="kpi-val" style="color:var(--warn)">{{ frd_rate }}</div>
          <div class="kpi-label">Fraud Rate</div>
        </div>
      </div>
      <div class="col-6 col-lg-3">
        <div class="kpi-card text-center">
          <div class="kpi-val">{{ frd_iso_auc }}</div>
          <div class="kpi-label">Isolation Forest AUC</div>
        </div>
      </div>
      <div class="col-6 col-lg-3">
        <div class="kpi-card text-center">
          <div class="kpi-val" style="color:var(--success)">{{ frd_gb_auc }}</div>
          <div class="kpi-label">GBM AUC</div>
        </div>
      </div>
      <div class="col-6 col-lg-3">
        <div class="kpi-card text-center">
          <div class="kpi-val" style="color:var(--accent2)">{{ frd_dt_auc }}</div>
          <div class="kpi-label">Decision Tree AUC</div>
        </div>
      </div>
    </div>
    <div class="row g-3">
      <div class="col-lg-6">
        <div class="section-card">
          <div class="section-title">Transaction Scatter ‚Äî Amount vs Velocity</div>
          <div class="section-sub">Red = fraud ¬∑ Blue = legitimate</div>
          <div id="frd-scatter" style="height:350px;"></div>
        </div>
      </div>
      <div class="col-lg-6">
        <div class="section-card">
          <div class="section-title">ROC Curves</div>
          <div id="frd-roc" style="height:350px;"></div>
        </div>
      </div>
    </div>
    <div class="row g-3">
      <div class="col-md-6">
        <div class="section-card">
          <div class="section-title">Feature Importance (GBM)</div>
          <div id="frd-imp" style="height:280px;"></div>
        </div>
      </div>
      <div class="col-md-6">
        <div class="section-card">
          <div class="section-title">Decision Tree Rules <span class="ms-2 model-badge badge-dt">max_depth = 3</span></div>
          <pre class="tree-pre" id="frd-rules" style="height:260px;overflow-y:auto;"></pre>
        </div>
      </div>
    </div>
  </div>

  <!-- ‚îÄ‚îÄ MODEL COMPARISON ‚îÄ‚îÄ -->
  <div class="page" id="page-compare">
    <h4 class="fw-bold mb-0"><i class="bi bi-bar-chart-line-fill me-2 text-info"></i>Model Comparison</h4>
    <p class="text-secondary mb-3" style="font-size:.85rem;">Side-by-side performance across all use cases</p>
    <div class="row g-3">
      <div class="col-12">
        <div class="section-card">
          <div class="section-title">Classification AUC ‚Äî All Models √ó All Tasks</div>
          <div id="cmp-auc" style="height:400px;"></div>
        </div>
      </div>
    </div>
    <div class="row g-3">
      <div class="col-md-6">
        <div class="section-card">
          <div class="section-title">Accuracy Comparison</div>
          <div id="cmp-acc" style="height:340px;"></div>
        </div>
      </div>
      <div class="col-md-6">
        <div class="section-card">
          <div class="section-title">F1 Score Comparison</div>
          <div id="cmp-f1" style="height:340px;"></div>
        </div>
      </div>
    </div>
    <div class="row g-3">
      <div class="col-12">
        <div class="section-card">
          <div class="section-title">Model Selection Guide</div>
          <div class="row g-2 mt-1">
            <div class="col-md-3"><div class="technical-box" style="height:100%;">
              <div class="label">Use Decision Tree when‚Ä¶</div>
              <ul style="font-size:.8rem;color:#86efac;margin-top:.5rem;padding-left:1.2rem;">
                <li>Regulators need full rule transparency</li><li>Building a scoreboard / policy</li><li>Data is small or noisy</li>
              </ul></div>
            </div>
            <div class="col-md-3"><div class="technical-box" style="height:100%;border-color:#16a34a60;">
              <div class="label" style="color:#86efac;">Use Random Forest when‚Ä¶</div>
              <ul style="font-size:.8rem;color:#86efac;margin-top:.5rem;padding-left:1.2rem;">
                <li>You need robust predictions</li><li>Feature selection matters</li><li>Data has many missing values</li>
              </ul></div>
            </div>
            <div class="col-md-3"><div class="technical-box" style="height:100%;border-color:#d9770660;">
              <div class="label" style="color:#fb923c;">Use GBM / AdaBoost when‚Ä¶</div>
              <ul style="font-size:.8rem;color:#fb923c;margin-top:.5rem;padding-left:1.2rem;">
                <li>Maximum predictive accuracy needed</li><li>Imbalanced classes (fraud)</li><li>Rich feature engineering available</li>
              </ul></div>
            </div>
            <div class="col-md-3"><div class="technical-box" style="height:100%;border-color:#be123c60;">
              <div class="label" style="color:#fb7185;">Use GLM when‚Ä¶</div>
              <ul style="font-size:.8rem;color:#fb7185;margin-top:.5rem;padding-left:1.2rem;">
                <li>Actuarial / regulatory requirement</li><li>Coefficients must be interpretable</li><li>Insurance pricing (Tweedie/Gamma)</li>
              </ul></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ‚îÄ‚îÄ DATA EXPLORER ‚îÄ‚îÄ -->
  <div class="page" id="page-data">
    <h4 class="fw-bold mb-0"><i class="bi bi-table me-2 text-success"></i>Data Explorer</h4>
    <p class="text-secondary mb-3" style="font-size:.85rem;">Browse synthetic training datasets ¬∑ Distributions ¬∑ Target rates</p>
    <div class="mb-3">
      <select class="form-select form-select-sm" style="background:#1e293b;border-color:#334155;color:#e2e8f0;width:auto;display:inline-block;" id="data-sel" onchange="renderData()">
        <option value="credit">Credit Risk</option>
        <option value="insurance">Insurance</option>
        <option value="churn">Churn</option>
        <option value="fraud">Fraud</option>
      </select>
    </div>
    <div class="row g-3">
      <div class="col-12">
        <div class="section-card">
          <div class="section-title">Data Sample (first 20 rows)</div>
          <div style="overflow-x:auto;"><table class="table data-table table-dark table-hover" id="data-table"></table></div>
        </div>
      </div>
    </div>
    <div class="row g-3">
      <div class="col-md-6">
        <div class="section-card">
          <div class="section-title">Feature Distribution</div>
          <select class="form-select form-select-sm mb-2" style="background:#0f172a;border-color:#334155;color:#e2e8f0;width:auto;" id="dist-feat-sel" onchange="renderDist()"></select>
          <div id="data-dist" style="height:280px;"></div>
        </div>
      </div>
      <div class="col-md-6">
        <div class="section-card">
          <div class="section-title">Target Rate by Feature Bin</div>
          <div id="data-target" style="height:310px;"></div>
        </div>
      </div>
    </div>
  </div>

</div><!-- /main -->

<script src="/static/charts.js"></script>
<script>
// ‚îÄ‚îÄ DATA FROM FLASK ‚îÄ‚îÄ
const CR  = {{ cr_json|safe }};
const INS = {{ ins_json|safe }};
const CHN = {{ chn_json|safe }};
const FRD = {{ frd_json|safe }};

const FULL = {
  credit:    {{ cr_full_sample|safe }},
  insurance: {{ ins_full_sample|safe }},
  churn:     {{ chn_full_sample|safe }},
  fraud:     {{ frd_full_sample|safe }},
};

const DIST = {
  credit:    {{ cr_dist|safe }},
  insurance: {{ ins_dist|safe }},
  churn:     {{ chn_dist|safe }},
  fraud:     {{ frd_dist|safe }},
};

const CHN_SAT_X = {{ chn_sat_x|safe }};
const CHN_SAT_Y = {{ chn_sat_y|safe }};
const CHN_TEN_X = {{ chn_ten_x|safe }};
const CHN_TEN_Y = {{ chn_ten_y|safe }};

// ‚îÄ‚îÄ BOOT ‚îÄ‚îÄ
renderOverview();
const rendered = {overview: true};
</script>
</body>
</html>